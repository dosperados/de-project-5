# Спринт 7 Проект 5 - дальнейшее развитие DWH


## Требования 
Основная задача — расширить модель данных, проанализировать новую информацию и помочь маркетологам дать эффективную рекламу соцсети в интернете.

## Целевая витрина dwh.dm_user_conversion

1. hk_group_id- Хэш-ключ группы.
2. cnt_added_users - Количество новых пользователей группы (event = add).
3. cnt_users_in_group_with_messages - Количество пользователей группы, которые написали хотя бы одно сообщение.
4. group_conversion - Доля пользователей группы, которые начали общаться.
5. Выводимая информация отсортирована по убыванию по полю - group_conversion

## Запуск 
1. Создать таблицы выполнив DDL скрипт в Vertica из \src\db_ddl\ddl_change_schema.sql
2. Запускам Apache Airflow 
3. Переносим python dags из \src\dags в директорию с дагами airflow
4. Запускаем задачу stg_fetch_files_from_s3
5. Запускаем задачу stg_migration
6. Проверяем в Airflow, что задачи запустились и отработали успешно
7. Запрос на получение данных из целевой витрины \src\db_ddl\sql_dm_user_conversion.sql

## Рекомендации для маркетинга
Первые три группы из запроса sql_dm_user_conversion показывают самую высокую конверсию. Данные группы рекомендуемы, в первую очередь, для запуска рекламы.
